# Captureå¤‰åŒ–æ¤œå‡ºã®çµ±åˆè¨­è¨ˆ

## ğŸ” **ç¾çŠ¶åˆ†æ**

### ç‚¹åœ¨ã—ã¦ã„ã‚‹å®Ÿè£…

1. **`src/panes.ts`** - `getPaneContent()`
   - tmux capture-paneå®Ÿè¡Œã®ã¿
   - æœ€å¾Œ10è¡Œé™å®š

2. **`src/infrastructure/adapters.ts`** - `PaneContentAdapter`
   - capture + Mapå±¥æ­´ç®¡ç†
   - æ­£è¦åŒ–å‡¦ç†

3. **`src/pane_monitor.ts`** - `PaneContentMonitor`  
   - capture + é…åˆ—å±¥æ­´ç®¡ç†
   - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ã

4. **`src/domain/pane.ts`** - Paneé›†ç´„ãƒ«ãƒ¼ãƒˆ
   - DDDè¨­è¨ˆã«ã‚ˆã‚‹captureçŠ¶æ…‹ç®¡ç†ï¼ˆä»Šå›è¿½åŠ ï¼‰

### ğŸ’” **å•é¡Œç‚¹**

- **é‡è¤‡å®Ÿè£…**: 4ç®‡æ‰€ã§åˆ¥ã€…ã®captureæ©Ÿèƒ½
- **ä¸ä¸€è‡´**: å„ã€…ç•°ãªã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ»ãƒ‡ãƒ¼ã‚¿æ§‹é€   
- **è²¬ä»»åˆ†æ•£**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ãŒinfrastructureå±¤ã«æ¼å‡º
- **ãƒ†ã‚¹ãƒˆå›°é›£**: çµ±ä¸€ã•ã‚ŒãŸä»•æ§˜ãŒãªã„

## ğŸ¯ **çµ±åˆæˆ¦ç•¥**

### DDDå±¤æ§‹é€ ã§ã®å½¹å‰²åˆ†æ‹…

```
Application Layer
â”œâ”€ CaptureOrchestrator (æ–°è¨­)
â”‚   â”œâ”€ captureå®Ÿè¡Œã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æº

Domain Layer  
â”œâ”€ Pane (é›†ç´„ãƒ«ãƒ¼ãƒˆ)
â”‚   â”œâ”€ captureçŠ¶æ…‹ã®ç®¡ç†
â”‚   â””â”€ ActivityStatus/WorkerStatusçµ±åˆ
â”œâ”€ CaptureState (å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ)
â”‚   â”œâ”€ STATUS + INPUTè¦³ç‚¹ã®çµ±åˆ
â”‚   â””â”€ StatusMappingé€£æº
â””â”€ CaptureService (ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹)
    â”œâ”€ captureå¤‰åŒ–æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
    â””â”€ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«é©ç”¨

Infrastructure Layer
â””â”€ TmuxCaptureAdapter (çµ±ä¸€adapter)
    â”œâ”€ tmux capture-paneå®Ÿè¡Œ
    â””â”€ æŠ€è¡“çš„è©³ç´°ã®æŠ½è±¡åŒ–
```

## ğŸ—ï¸ **çµ±åˆå®Ÿè£…ãƒ—ãƒ©ãƒ³**

### ãƒ•ã‚§ãƒ¼ã‚º1: çµ±ä¸€Adapterä½œæˆ
- æ—¢å­˜4å®Ÿè£…ã®çµ±åˆ
- DDDè¨­è¨ˆã«å¾“ã£ãŸinterfaceå®šç¾©

### ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ  
- captureå¤‰åŒ–æ¤œå‡ºã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- StatusMappingçµ±åˆ

### ãƒ•ã‚§ãƒ¼ã‚º3: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ç§»è¡Œ
- æ®µéšçš„ãªç½®ãæ›ãˆ
- ãƒ†ã‚¹ãƒˆã§ã®æ¤œè¨¼

## ğŸ“Š **çµ±åˆå¾Œã®åˆ©ç‚¹**

1. **å˜ä¸€è²¬ä»»**: captureæ©Ÿèƒ½ã®ä¸€å…ƒåŒ–
2. **å‹å®‰å…¨**: Resultå‹ã«ã‚ˆã‚‹å …ç‰¢æ€§
3. **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ãƒ¢ãƒƒã‚¯å¯èƒ½ãªè¨­è¨ˆ
4. **ä¿å®ˆæ€§**: DDDæ§‹é€ ã«ã‚ˆã‚‹æ˜ç¢ºãªè²¬ä»»åˆ†ç•Œ
