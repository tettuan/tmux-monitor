---
title: 
description:
variables:
  uv-scope: 実行済の結果から導き出したネクストアクションを進める。その際に、基本事項を維持した状態で、次アクションを指示する。
  input_text: ネクストアクションの指示書
---

# プロジェクト: {uv-scope}のドメイン駆動設計と全域性（Totality）の融合完成

リファクタリング継続の指示である。
「ネクストアクション」を実施する。

実装方針:
現在の{uv-scope}の実装をドメイン駆動設計と全域性（Totality）による設計で、堅牢になるようリファクタリングする。ドメイン領域の明確な理解に基づき、型安全性を強化して、骨格が通った芯の強いコード実装を実現する。

`Totality` について、必ず `docs/development/totality_go.ja.md` を参照すること。
ドメイン情報は、 `docs/domain/design_domain_boundary-20250802.md` および `docs/domain/architecture/subdomain_01_stock/**/*.md` を必ず読むこと。
プロジェクト構造は、 `docs/architecture/domain-driven-implementation.md` に記載がある。

AI実装複雑化防止フレームワーク(`docs/development/ai-complexity-control_compact.ja.md`)に則り、エントロピー増大を抑制すること。

テスト方針:
テストに関しては `docs/tests/README.md`, `docs/tests/testing_guidelines.md` を読むこと。

仕様:
他の`docs/*`資料は、適宜実装ファイルを変更するタイミングで検索し、必要な資料を読むこと。

## 実施内容

1. 資料を読んで、ドメイン設計と Totality を理解する。
2. AI実装複雑化防止フレームワーク(`docs/development/ai-complexity-control_compact.ja.md`)を理解する。
3. 理解した結果や調査した結果を `tmp/<branch_name>/` 配下に作成する。
4. 「ネクストアクション」の各実装を調べ、修正が必要なファイルをリスト化する。 
5. リストに基づき、実装をドメイン設計とTotalityに基づいて完成させる
6. 変更した実装に合わせてテストファイルを改修する
7. `go test ./path/to/package -v` で、作成したファイルをテストする
8. 3で作成したリストの全てが完了するまで、再び4に戻り、実装修正を行う

**スコープのドメイン領域**: {uv-scope}

### 全ての変更が完了した後

1. `make test-unit` で、ユニットテストが pass するまでテストを完成させる
2. `make test` で、全テストが passするまでテストを完成させる

### ネクストアクション

```````
{input_text}
```````

## 完了条件

1. ドメイン駆動設計とTotalityに基づいた改修が完了した
2. `make test` がエラー0件で通った


# タスクの進め方

- Gitブランチ準備: `echo "<今回の作業内容を30文字以内で表現>" | climpt-launch git-branch if-needed` を実行し、出力結果の指示に従う。
- サイクル: 仕様把握 → 調査 → 計画・設計 → 実行 → 記録・検証 → 学習 → 仕様把握へ戻る
- 作業分担: 作業内容をワーカープールマネージャーへ依頼し、ワーカーへの指示を行わせる。チームの常時フル稼働を目指す。

## チームの構成

あなたは指揮官であり上司である。
最初にチームを立ち上げて進める。
各paneの存在を確認し、無ければ起動し、あればClaudeの起動を確認すること。全員を調べ、Claudeが起動していない部下に対し,Claude起動する。

`instructions/team-head.ja.md` に詳細の記載がある。
チーム立ち上げの指示なので、必ず最初に読むこと。

## 進捗更新

- 進捗させるべきタスクは `tmp/<branch_name>/tasks.md` に書き出し、完了マークをつけたりしながら進めてください。
- すべてが完了したら、`tmp/<branch_name>/completed.md` に完了したレポートを記録してください。

# 作業開始指示

まずチームを立ち上げます。
その後、初期タスク（仕様理解、実装調査）を早々にワーカープールマネージャーへ渡します。

続いて、仕様の理解を進め、実装方針に基づいてワーカープールの稼働を最大化します。
その後は、チーム全体のパフォーマンスが重要です。
常にワーカープールマネージャーと、その部下であるゴルーチンをフル稼働させてください。

今なにをすべきか（タスク分割や、状況整理、要件定義、実装、テスト）について、ワーカープールマネージャーが把握していることが重要です。ワーカープールマネージャーから、今やる詳細タスクへ分割し、部下ゴルーチンへ割り当てさせてください。

プロジェクトの成功を祈ります。開始してください。
